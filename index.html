<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	
	<!-- Load FontAwesome icons and Gfont -->
	<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet"> 

	<!-- Load the custom CSS style file -->
	<link rel="stylesheet" type="text/css" href="style.css">
		<title>MK Player</title>
</head>

<body>

	<!--Large Screen Options-->
	<div class="container-fluid">
		<div class="navbar d-none d-xl-block d-lg-block d-sm-block d-xl-none" style="width: max-content; margin-right: -14px;">
			<nav class="navbar navbar-expand-lg navbar-light ">
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			  <span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNav">
			  <ul class="navbar-nav">
				<li class="nav-item active">
				  <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
				</li>
				<li class="nav-item">
				  <a class="nav-link" href="about.html">About</a>
				</li>
			  </ul>
			</div>
		  </nav>
		</div>

		<div class="styletext">
			<h1 class="d-none d-xl-block d-lg-block d-sm-block d-xl-none" style="position: absolute; top: 18%; color: white; font-size: 100px;">THE <br> REAL <br> SOUND</h1>	
		</div>
		<h1 style="font-family:'Lobster', cursive; position: absolute;top:2%; filter: opacity(80%);">MK PLAYER</h1>
		<div class="icona">
				<img class="d-none d-xl-block d-lg-block d-sm-block d-xl-none" src="media/play.png" id="icona" onclick="myFunction()" >
		</div>
		<!--Small screen options-->

		<div class="dropdown d-none visible-xs" style="position: absolute; left: 54%;top: 38px;";>
			<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
			</button>
			<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <a class="dropdown-item " href="#">Home</a>
                <a class="dropdown-item disabled" href="about.html">About</a>
                </div>
		</div>
	</div>
	<div class="iconb">
		<img class="d-none visible-xs" style="position: absolute; top: 25%; right: 38%;" src="media/play.png" id="iconb" onclick="myFunction()" >
	</div>

</div>

	
<!--Player Hide until click the menu-->

<script>
	function myFunction() {
	  var x = document.getElementById("myDIV");
	  if (x.style.display === "none") {
		x.style.display = "block";
	  } else {
		x.style.display = "none";
	  }
	}
	</script>
  
	  
<!--Player-->
  
  <div class="player" id="myDIV" style="display: none;">
	  <div class="main">
		  <audio></audio>
		  <div class="thumbnail">
			  <img src="">
		  </div>
		  <div class="seekbar">
			  <input type="range">
		  </div>
		  <div class="details">
			  <h2></h2>
			  <p></p>
		  </div>
		  <div class="controls">
			  <div class="prev-control">
				  <i class="fa fa-backward"></i>
			  </div>
			  <div class="play-pause-control paused">
				  <i class="fa fa-play"></i>
				  <i class="fa fa-pause"></i>
			  </div>
			  <div class="next-control">
				  <i class="fa fa-forward"></i>
			  </div>
		  </div>
	  </div>
	  <div class="player-list">
		  <div class="toggle-list">
			  <i class="fa fa-angle-up"></i>
			  <i class="fa fa-angle-down"></i>
		  </div>
		  <div class="list">
		  </div>
	  </div>
  </div>	
  <script>
  
  
  function _(query){
	  return document.querySelector(query);
  }
  function _all(query){
	  return document.querySelectorAll(query);
  }
  let songList = [
	  	  {
		  thumbnail:"ravenpr.jpeg",
		  audio:"301 Ravel.mp3",
		  songname:"Pavane pour une infante défunte",
		  artistname:"Ravel"
	  },
	  {
		  thumbnail:"and_the_waltz_goes_on.jpg",
		  audio:"300Andre.mp3",
		  songname:"And The Waltz Goes On",
		  artistname:"André Rieu"
	  },

	  {
		  thumbnail:"gfa.jpg",
		  audio:"302Faure.mp3",
		  songname:"Dolly Suite",
		  artistname:"Fauré"
	  },
	  {
		thumbnail:"flu1.jpg",
		audio:"305mozarty.mp3",
		songname:"Fluto Concerto",
		artistname:"Mozart"

	  }		,
	  {
			thumbnail:"romeo.jpg",
			audio:"303Andrelove.mp3",
			songname:"Love Theme",
			artistname:"André Rieu",
	  },
	  {
		  thumbnail:"lks.jpeg",
		  audio:"304Kreisler.mp3",
		  songname:"Liebesleid",
		  artistname:"Kreisler"
	  },
	  {
		  thumbnail:"bee.jpg",
		  audio:"306Beethoven.mp3",
		  songname:"Emperor",
		  artistname:"Bethoven"
		},
		{
			thumbnail:"canthelp.jpg",
			audio:"307cantandre.mp3",
			songname:"Can't Help Falling In Love",
			artistname:"André Rieu",
		},
		{
		  thumbnail:"bw1.jpg",
		  audio:"308brahms.mp3",
		  songname:"Waltz #15",
		  artistname:"Brahms"
		},
		{
		  thumbnail:"onlylove.jpeg",
			audio:"309andre.mp3",
			songname:"Only Love",
			artistname:"André Rieu"
		},
	  {
		  thumbnail:"con4.jpg",
		  audio:"310Radvon.mp3",
		  songname:"Mozart - Radovan Vlatković",
		  artistname:"Mozart"
	  },
	  {
		  thumbnail:"311.jpeg",
		  audio:"311Andres.mp3",
		  songname:"The second waltz",
		  artistname:"André Rieu"
	  },
	  {
		  thumbnail:"312.jpg",
		  audio:"312chopin.mp3",
		  songname:"Berceuse",
		  artistname:"Chopin"
	  },
	  {
		  thumbnail:"313.jpg",
		  audio:"313andre.mp3",
		  songname:"Chiquitita",
		  artistname:"André Rieu"
	  },
	  {
		  thumbnail:"314.jpg",
		  audio:"314musso.mp3",
		  songname:"A Night on the Bare Mountain",
		  artistname:"Mussorgsky"
	  },
	  {
		  thumbnail:"315gr.jpg",
		  audio:"315gre.mp3",
		  songname:"Rhapsody In Blue",
		  artistname:"Gershwin"
	  },
	  {
		  thumbnail:"316dh.jpg",
		  audio:"316dh.mp3",
		  songname:"The Deer Hunter",
		  artistname:"Cavatina"
	  },
	  {
		  thumbnail:"317gl.jpg",
		  audio:"317gl.mp3",
		  songname:"Overture",
		  artistname:"Glinka"
	  },
	  {
		  thumbnail:"318gl.jpg",
		  audio:"318js.mp3",
		  songname:"Tritsch-Tratsch Polka",
		  artistname:"Johann Strauss"
	  },
	  {
		  thumbnail:"319ec.jpg",
		  audio:"319ec.mp3",
		  songname:"Cello Concerto In E Minor",
		  artistname:"Elgar"
	  },
	  {
		  thumbnail:"320nt.jpg",
		  audio:"320nt.mp3",
		  songname:"The Heart Asks",
		  artistname:"Nyman"
	  },
	  {
		  thumbnail:"321ss.jpg",
		  audio:"321ss.mp3",
		  songname:"Romance",
		  artistname:"Saint-Saens"
	  },
	  {
		  thumbnail:"322ats.jpg",
		  audio:"322ats.mp3",
		  songname:"The Lonely Shepherd",
		  artistname:"André Rieu"
	  },
	  {
		  thumbnail:"324rc.jpg",
		  audio:"324rc.mp3",
		  songname:"Concierto de Aranjuez - II. Adag",
		  artistname:"Rodriogo"
	  },
	  {
			thumbnail:"325am.jpg",
			audio:"325am.mp3",
			songname:"My Way",
			artistname:"André Rieu"
	  },
	  {
			thumbnail:"326rp.jpg",
			audio:"326rp.mp3",
			songname:"pines of rome i pini di villa borghese",
			artistname:"respighi"
	  },
	  {
		  thumbnail:"323anm.jpg",
			audio:"323anm.mp3",
			songname:"Memory",
			artistname:"André Rieu"
	  },
	  {
			thumbnail:"328ks.jpg",
			audio:"328ks.mp3",
			songname:"Sabre Dance",
			artistname:"Khachaturian"
	  },
	  {
			thumbnail:"323anm.jpg",
			audio:"323anm.mp3",
			songname:"Memory",
			artistname:"André Rieu"
	  },
	  {
			thumbnail:"329cp.jpg",
			audio:"329cp.mp3",
			songname:"Polonaise #6 In A Flat",
			artistname:"Chopin"
	  },
	  {
		  thumbnail:"327abp.jpg",
			audio:"327abp.mp3",
			songname:"ballade pour adeline",
			artistname:"André Rieu"
	  },
	  {
		  thumbnail:"330bm.jpg",
		  audio:"330bm.mp3",
		  songname:"Minuet In C",
		  artistname:"Beethoven"
	  },

  ];

  //Player JS

  let currentSongIndex = 0;
   
  let player = _(".player"),
	  toggleSongList = _(".player .toggle-list");
   
  let main = {
	  audio:_(".player .main audio"),
	  thumbnail:_(".player .main img"),
	  seekbar:_(".player .main input"),
	  songname:_(".player .main .details h2"),
	  artistname:_(".player .main .details p"),
	  prevControl:_(".player .main .controls .prev-control"),
	  playPauseControl:_(".player .main .controls .play-pause-control"),
	  nextControl:_(".player .main .controls .next-control")
  }
   
  toggleSongList.addEventListener("click", function(){
	  toggleSongList.classList.toggle("active");
	  player.classList.toggle("activeSongList");
  });
   
  _(".player .player-list .list").innerHTML = (songList.map(function(song,songIndex){
	  return `
		  <div class="item" songIndex="${songIndex}">
			  <div class="thumbnail">
				  <img src="./files/${song.thumbnail}">
			  </div>
			  <div class="details">
				  <h2>${song.songname}</h2>
				  <p>${song.artistname}</p>
			  </div>
		  </div>
	  `;
  }).join(""));
   
  let songListItems = _all(".player .player-list .list .item");
  for(let i=0;i<songListItems.length;i++){
	  songListItems[i].addEventListener("click",function(){
		  currentSongIndex = parseInt(songListItems[i].getAttribute("songIndex"));
		  loadSong(currentSongIndex);
		  player.classList.remove("activeSongList");
	  });
  }
   
  function loadSong(songIndex){
	  let song = songList[songIndex];
	  main.thumbnail.setAttribute("src","./files/"+song.thumbnail);
	  main.songname.innerText = song.songname;
	  main.artistname.innerText = song.artistname;
	  main.audio.setAttribute("src","./files/"+song.audio);
	  main.seekbar.setAttribute("value",0);
	  main.seekbar.setAttribute("min",0);
	  main.seekbar.setAttribute("max",0);
	  main.audio.addEventListener("canplay",function(){
		  main.audio.play();
		  main.seekbar.setAttribute("max",parseInt(main.audio.duration));
		  main.audio.onended = function(){
			  main.nextControl.click();
		  }
	  })
  }
  setInterval(function(){
	  main.seekbar.value = parseInt(main.audio.currentTime);
  },1000);
   
  main.prevControl.addEventListener("click",function(){
	  currentSongIndex--;
	  if(currentSongIndex < 0){
		  currentSongIndex = songList.length + currentSongIndex;
	  }
	  loadSong(currentSongIndex);
  });
  main.nextControl.addEventListener("click",function(){
	  currentSongIndex = (currentSongIndex+1) % songList.length;
	  loadSong(currentSongIndex);
  });
  main.playPauseControl.addEventListener("click",function(){
	  if(main.audio.paused){
		  main.playPauseControl.classList.remove("paused");
		  main.audio.play();
	  } else {
		  main.playPauseControl.classList.add("paused");
		  main.audio.pause();
	  }
  });
  main.seekbar.addEventListener("change",function(){
	  main.audio.currentTime = main.seekbar.value;
  });
  loadSong(currentSongIndex);
  
  
  </script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  
</body>
</html>
